
<!DOCTYPE html>
<html lang="fr">
<head>
<meta charset="UTF-8">
<title>Lipido-Coach v2</title>
<style>
body { font-family: Arial, sans-serif; margin: 20px; background: #f5f5f5; }
h1 { color: #333; }
textarea { width: 100%; height: 100px; margin-top: 10px; padding: 10px; font-size: 1em; }
button { padding: 10px 20px; margin-top: 10px; cursor: pointer; background: #007bff; color: white; border: none; border-radius: 5px; }
table { width: 100%; border-collapse: collapse; margin-top: 20px; background: white; }
th, td { padding: 10px; border: 1px solid #ccc; text-align: center; }
th { background: #e5e5e5; }
#resume, #conseils { margin-top: 20px; padding: 10px; background: #fff3cd; border: 1px solid #ffeeba; border-radius: 5px; }
</style>
</head>
<body>

<h1>Lipido-Coach <sup>v2</sup></h1>
<p>Colle ton menu (ex: saumon, riz complet, courgettes, huile d'olive).  
Échelle 1→20 : 20 = très bénéfique pour le paramètre ciblé, 1 = très défavorable.</p>

<textarea id="repas" placeholder="Exemple : omelette, pain complet et avocat / tomate + huile d'olive"></textarea>
<br>
<button id="analyser">Analyser</button>

<div id="resultats" style="display:none;">
  <table>
    <thead>
      <tr>
        <th>Aliment</th>
        <th>LDL ↓</th>
        <th>HDL ↑</th>
        <th>Triglycérides ↓</th>
        <th>Glycémie ↓/stable</th>
        <th>Stéatose ↓</th>
        <th>HTA ↓</th>
      </tr>
    </thead>
    <tbody id="table-body"></tbody>
  </table>
  
  <div id="resume"></div>
  <ul id="conseils"></ul>
</div>

<script>
const dataScores = {
  "saumon":[18,19,17,15,18,17],
  "riz complet":[14,12,15,16,15,14],
  "courgettes":[19,12,18,18,18,17],
  "huile d'olive":[17,18,17,14,17,16],
  "omelette":[12,14,12,13,13,12],
  "pain complet":[14,11,15,16,14,13],
  "avocat":[18,17,17,14,17,15],
  "tomate":[19,12,18,18,18,17],
  "poulet":[15,14,14,13,15,14],
  "pâtes":[10,8,9,9,9,9],
  "frites":[5,4,3,4,3,4],
  "charcuterie":[4,3,4,3,4,3]
};

function analyser() {
  const repas = document.getElementById('repas').value.toLowerCase();
  if (!repas.trim()) { alert("Entre un menu."); return; }
  
  const aliments = repas.split(/,|;|\/|\+| et |\n/).map(a=>a.trim()).filter(a=>a);
  const tbody = document.getElementById('table-body');
  tbody.innerHTML = "";

  let scoresGlobaux = [];

  aliments.forEach(aliment => {
    const scores = dataScores[aliment] || [10,10,10,10,10,10];
    scoresGlobaux.push(scores);

    const tr = document.createElement('tr');
    tr.innerHTML = `<td>${aliment}</td>` + scores.map(s=>`<td>${s}</td>`).join('');
    tbody.appendChild(tr);
  });

  document.getElementById('resultats').style.display = 'block';
  
  const moy = scoresGlobaux.reduce((acc, s) => acc + s.reduce((a,b)=>a+b,0)/s.length,0) / scoresGlobaux.length;
  document.getElementById('resume').innerHTML = `<b>Score global</b> : ${moy.toFixed(1)}/20 - ${
    moy >= 15 ? "Très favorable" : moy >= 10 ? "Correct" : "À améliorer"
  }`;

  const conseils = document.getElementById('conseils');
  conseils.innerHTML = "";

  if (scoresGlobaux.some(s => s[0] <= 9)) conseils.innerHTML += "<li>Réduire les aliments défavorables au LDL (remplacer par poissons gras, fibres, huile d'olive).</li>";
  if (scoresGlobaux.some(s => s[1] <= 9)) conseils.innerHTML += "<li>Améliorer le HDL avec plus de poissons gras, noix, huile d'olive.</li>";
  if (scoresGlobaux.some(s => s[2] <= 9)) conseils.innerHTML += "<li>Réduire les sucres et graisses saturées pour baisser les triglycérides.</li>";
  if (scoresGlobaux.some(s => s[3] <= 9)) conseils.innerHTML += "<li>Privilégier les fibres et céréales complètes pour stabiliser la glycémie.</li>";
  if (scoresGlobaux.some(s => s[4] <= 9)) conseils.innerHTML += "<li>Diminuer les sucres et l’alcool pour réduire la stéatose.</li>";
  if (scoresGlobaux.some(s => s[5] <= 9)) conseils.innerHTML += "<li>Limiter le sel et les produits ultra-transformés pour l’hypertension.</li>";
}

document.getElementById('analyser').addEventListener('click', analyser);
</script>

</body>
</html>
